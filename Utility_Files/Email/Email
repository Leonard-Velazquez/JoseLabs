
import java.io.IOException;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.Multipart;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class Email {
	static Logger logger = LoggerFactory.getLogger(Email.class);

	static void sendEmail(String toEmail, String subject, String body, String[] attachFiles) {
		try {
			logger.debug("Mailing the details");
			Properties props = new Properties();

			props.put("mail.smtp.host", "enter-the-host-ip"); // SMTP Host
			props.put("mail.smtp.auth", "false");
			props.put("mail.smtp.port", "25"); // TLS Port
			Session session = Session.getInstance(props, null);
			// creates a new e-mail message
			Message msg = new MimeMessage(session);
			// set message headers
			msg.addHeader("Content-type", "text/HTML; charset=UTF-8");
			msg.addHeader("format", "flowed");
			msg.setFrom(new InternetAddress("abc@test.com", "Write your subject"));
			msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toEmail, false));
			// msg.setRecipients(Message.RecipientType.TO, recipientAddress);
			msg.setSubject(subject);
			// creates message part
			MimeBodyPart messageBodyPart = new MimeBodyPart();
			messageBodyPart.setContent(body, "text/html; charset=UTF-8");
			// creates multi-part
			Multipart multipart = new MimeMultipart();
			multipart.addBodyPart(messageBodyPart);
			// MimeBodyPart attachPart = new MimeBodyPart();

			// adds attachments
			if (attachFiles != null && attachFiles.length > 0) {
				for (String filePath : attachFiles) {
					if (filePath != null && filePath.isEmpty() == false) {
						MimeBodyPart attachPart = new MimeBodyPart();
						try {
							attachPart.attachFile(filePath);
						} catch (IOException ex) {
							ex.printStackTrace();
							logger.debug("unable to attach file" + ex);
						}
						multipart.addBodyPart(attachPart);
					}
				}
			}

			// sets the multi-part as e-mail's content
			msg.setContent(multipart);
			// sends the e-mail
			Transport.send(msg);
			logger.debug("Email has been Sent Successfully!!");
		} catch (Exception e) {
			// e.printStackTrace();
			logger.error("Could not send a mail due to connection failure", e);
		}

	}
}
